import mak
from mak import module
import os

def options(opt):
	pass

def configure(conf):
	pass

def build(bld):
	bld.m['mak'] = module.util('mak', [], 'engine')
	bld.m['mak'].sourcetree.prefix = ''

	def addEntries(p, path, recurse):
		for entries in os.listdir(path):
			if entries == '.svn' or entries == '.cvs' or entries == 'win32':
				continue
			entry = os.path.join(path, entries)
			if os.path.isdir(entry):
				recurse(p, entry, recurse)
			elif entries == 'wscript' or entries == 'wscript_build' or entries.endswith('.py'):
				p.addFile(entry)
	addEntries(bld.m['mak'], 'mak', addEntries)

